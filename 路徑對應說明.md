# 路徑對應說明（改為根目錄 api/ 後）

## 結論：**前端與後端「呼叫路徑」都沒有改，不需要一併改程式**

改動的只有「Vercel 用哪一支檔案當後端入口」以及「入口檔如何轉發路徑」，前端與後端程式碼的 URL/路徑維持不變。

---

## 一、前端實際請求的 URL（未改）

| 前端呼叫 | 實際請求 URL | 說明 |
|----------|--------------|------|
| `studentApi.getAll()` | `GET /api/students/` | API_BASE_URL('/api') + endpoint('/students/') |
| `studentApi.getById(id)` | `GET /api/students/{id}` | 同上 |
| `classApi.getAll()` | `GET /api/classes/` | 同上 |
| `sessionApi.getAll()` | `GET /api/sessions/` | 同上 |
| `transactionApi.getAll()` | `GET /api/transactions/` | 同上 |
| `healthApi.check()` | `GET /api/health` | 同上 |

- **apiService.js** 裡：生產環境 `API_BASE_URL = '/api'`，各 API 的 `endpoint` 仍是 `/students/`、`/classes/`、`/health` 等。
- 所以前端**沒有**被改成打別的路徑，**不需要一併更改**。

---

## 二、Vercel 路由（改的是「導向哪支函數」）

| 請求路徑 | 導向 | 說明 |
|----------|------|------|
| `/api/(.*)` | `/api/index.py` | 所有 /api/xxx 都進根目錄的 Python 入口（以前是 /backend/api/index.py） |
| `/health` | `/api/index.py` | 健康檢查也進同一支（可直接打 /health 或 /api/health） |

- 只有 **vercel.json 的 `dest`** 從 `backend/api/index.py` 改成 `api/index.py`，**沒有**改前端要打的 URL。

---

## 三、根目錄 api/index.py 的轉發（路徑改寫只在這裡）

| 進入 api/index.py 的 path | 轉發給 FastAPI 的 path |
|----------------------------|-------------------------|
| `/api/students/` | `/students/` |
| `/api/classes/` | `/classes/` |
| `/api/sessions/` | `/sessions/` |
| `/api/transactions/` | `/transactions/` |
| `/api/health` | `/health` |
| `/api` | `/` |
| `/health`（直接打） | `/health`（不變） |

- 只有 **api/index.py** 在做「把 `/api` 前綴拿掉」的改寫，讓 FastAPI 仍然收到原本定義的路徑（`/students/`、`/health` 等）。
- **backend/api/index.py** 裡的 `@app.get("/students/")`、`@app.get("/health")` 等**完全沒改**。

---

## 四、對應關係總覽

```
前端 (apiService.js)            Vercel 路由              api/index.py              backend (FastAPI)
─────────────────────────────────────────────────────────────────────────────────────────────────
GET /api/students/      →      /api/index.py      →      path 改為 /students/  →    @app.get("/students/")
GET /api/classes/       →      /api/index.py      →      path 改為 /classes/   →    @app.get("/classes/")
GET /api/health         →      /api/index.py      →      path 改為 /health     →    @app.get("/health")
GET /health             →      /api/index.py      →      path 維持 /health     →    @app.get("/health")
```

所以：**改路徑的只有 Vercel 的「入口檔案」與入口檔內的路徑轉發，對應調用函數的路徑（前端 + 後端）都已經對齊，沒有漏改。**
