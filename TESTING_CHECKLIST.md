# 補習班管理系統 — 功能測試清單

可依此清單逐項手動測試，確認前後端與各模組是否正常運作。

---

## 一、後端 API 測試（可搭配 Swagger：http://localhost:8000/docs）

### 1. 基礎與健康檢查
| 項目 | 方法 | 路徑 | 預期 | 備註 |
|------|------|------|------|------|
| 根路徑 | GET | `/` | 回傳歡迎訊息 | 確認服務有啟動 |
| 健康檢查 | GET | `/health` | `status: "ok"`、資料庫連線成功 | 確認 DB 連線正常 |

### 2. 學生 (Students)
| 項目 | 方法 | 路徑 | 預期 |
|------|------|------|------|
| 取得學生列表 | GET | `/students/` | 回傳學生陣列（可為空） |
| 新增學生 | POST | `/students/` | 201，回傳新學生（含 id、name、age、grade、school、phone、dob） |
| 取得單一學生 | GET | `/students/{student_id}` | 回傳該學生或 404 |
| 更新學生 | PUT | `/students/{student_id}` | 回傳更新後學生或 404 |
| 刪除學生 | DELETE | `/students/{student_id}` | 204 或 404 |

**建議測試資料**：姓名、年齡、年級、學校、電話、出生日期皆填寫有效值。

### 3. 課程 (Classes)
| 項目 | 方法 | 路徑 | 預期 |
|------|------|------|------|
| 取得課程列表 | GET | `/classes/` | 回傳課程陣列 |
| 新增課程 | POST | `/classes/` | 201，回傳新課程（含 name、main_teacher、start_date、end_date、days_of_week、total_sessions、price、payment_*、enrolled_students 等） |
| 取得單一課程 | GET | `/classes/{class_id}` | 回傳該課程或 404 |
| 更新課程 | PUT | `/classes/{class_id}` | 回傳更新後課程或 404 |
| 刪除課程 | DELETE | `/classes/{class_id}` | 204 或 404 |

**注意**：課程需含 `days_of_week`（0–6）、`total_sessions`、`price`、`payment_installments` 等。

### 4. 會話 / 點名 (Sessions)
| 項目 | 方法 | 路徑 | 預期 |
|------|------|------|------|
| 取得全部會話 | GET | `/sessions/` | 回傳會話陣列 |
| 依課程取得 | GET | `/sessions/?class_id={class_id}` | 該課程的會話 |
| 依日期取得 | GET | `/sessions/?session_date=YYYY-MM-DD` | 該日會話 |
| 新增會話 | POST | `/sessions/` | 201，回傳新會話（class_id、date、attendance 等） |
| 取得單一會話 | GET | `/sessions/{session_id}` | 回傳該會話或 404 |
| 更新會話（含點名） | PUT | `/sessions/{session_id}` | 回傳更新後會話或 404 |
| 刪除會話 | DELETE | `/sessions/{session_id}` | 204 或 404 |

### 5. 交易 / 繳費 (Transactions)
| 項目 | 方法 | 路徑 | 預期 |
|------|------|------|------|
| 取得全部交易 | GET | `/transactions/` | 回傳交易陣列 |
| 依學生取得 | GET | `/transactions/?student_id={student_id}` | 該學生的交易 |
| 新增交易（報名產生） | POST | `/transactions/` | 201，回傳新交易（student_id、class_id、amount、status、due_date 等） |
| 取得單一交易 | GET | `/transactions/{transaction_id}` | 回傳該交易或 404 |
| 更新交易（如改繳費狀態） | PUT | `/transactions/{transaction_id}` | 回傳更新後交易或 404 |
| 刪除交易 | DELETE | `/transactions/{transaction_id}` | 204 或 404 |

---

## 二、前端頁面與導航

### 1. 整體
| 項目 | 操作 | 預期 |
|------|------|------|
| 首頁載入 | 開啟 http://localhost:3000 | 出現「補習班管理系統」標題與導航列 |
| 導航切換 | 點「學生管理 / 課堂系統 / 財務管理 / 日曆總覽 / 歷史課表」 | 對應頁面內容切換、按鈕高亮正確 |
| 訊息列 | 操作成功或失敗時 | 頂部或指定區塊顯示成功/錯誤訊息 |
| 載入狀態 | 資料請求中 | 顯示「載入中...」等提示 |

### 2. 學生管理 (students)
| 項目 | 操作 | 預期 |
|------|------|------|
| 列表顯示 | 進入學生管理 | 顯示學生列表（表格或卡片） |
| 新增學生 | 點「新增學生」、填表、送出 | 表單送出後列表出現新學生、成功訊息 |
| 編輯學生 | 點某學生「編輯」、改資料、儲存 | 列表資料更新、成功訊息 |
| 刪除學生 | 點「刪除」、確認 | 跳出確認框，確認後該學生消失、成功訊息 |
| 學生繳費 | 點某學生「繳費」或「管理繳費」 | 開啟繳費 Modal，可看到該生交易、改狀態、列印收據/繳費單 |
| 學生摘要 | 點「學生摘要」或類似 | 開啟學生摘要 Modal（報名課程、出缺席等） |
| 報名課程 | 選學生、選課程、確認報名 | 學生加入課程、產生對應交易（未繳費） |

### 3. 課堂系統 (classes)
| 項目 | 操作 | 預期 |
|------|------|------|
| 列表顯示 | 進入課堂系統 | 顯示課程列表（名稱、老師、日期、學費等） |
| 新增課程 | 點「新增課程」、填表（名稱、老師、日期、星期、堂數、學費、期數等）、送出 | 新課程出現在列表 |
| 編輯課程 | 點「編輯」、修改、儲存 | 列表更新 |
| 刪除課程 | 點「刪除」、確認 | 確認後課程刪除（注意：會影響會話與交易） |
| 查看已報名學生 | 點某課程「已報名學生」或類似 | 開啟 Modal 顯示該課程學生名單 |
| 移除報名 | 在已報名名單中移除某學生、確認 | 該生從課程移除、相關未繳費記錄處理正確 |
| 課程日曆 | 點「課程日曆」或日曆圖示 | 開啟該課程日曆 Modal，顯示會話與順延等 |
| 順延 / 取消順延 | 在課程日曆中操作順延、取消順延 | 會話日期或狀態更新正確 |
| 手動開關會話 | 手動新增/取消某日會話 | 會話列表與日曆同步更新 |
| 繳費日期調整 | 點「調整繳費日期」、選課程、改日期、確認 | 該課程相關交易的繳費到期日更新 |

### 4. 財務管理 (finance)
| 項目 | 操作 | 預期 |
|------|------|------|
| 交易列表 | 進入財務管理 | 顯示交易列表（學生、課程、金額、到期日、狀態等） |
| 篩選 | 若有篩選（學生/課程/狀態） | 列表依篩選條件更新 |
| 變更繳費狀態 | 將某筆「未繳費」改為「已繳費」（或反之） | 狀態更新、可選填實際收款日 |
| 列印收據 | 點某筆「列印收據」 | 開啟收據 Modal、可列印 |
| 列印繳費通知單 | 點「列印繳費通知單」 | 開啟繳費單 Modal、可列印 |
| 整批列印 | 若有「全部繳費單」「全部收據」等 | 對應多筆資料的列印預覽/列印 |
| 合併列印 | 若有「合併列印」 | 多筆收據/繳費單合併在一份列印 |

### 5. 日曆總覽 (calendar)
| 項目 | 操作 | 預期 |
|------|------|------|
| 月曆顯示 | 進入日曆總覽 | 顯示當月月曆，有會話的日期有標記或可辨識 |
| 切換月份 | 點「上一個月」「下一個月」 | 月曆切換到前/後月 |
| 點選日期 | 點某一天 | 開啟「當日會話/點名」Modal |
| 當日會話與點名 | 在 Modal 中查看各課程會話、點名狀態 | 顯示正確；可更新出缺席（已到/未到/請假/順延） |

### 6. 歷史課表 (history)
| 項目 | 操作 | 預期 |
|------|------|------|
| 歷史會話列表 | 進入歷史課表 | 顯示過去會話列表（可按課程/日期篩選若有的話） |
| 內容正確性 | 檢查課程名、老師、日期、點名摘要 | 與學生管理、課堂系統、日曆資料一致 |

---

## 三、關鍵流程（端到端建議順序）

依下列順序測試，可涵蓋主要資料關聯：

1. **後端**  
   - GET `/health`、GET `/` 確認服務與 DB 正常。

2. **學生**  
   - 新增 1～2 位學生 → 編輯一位 → 列表與單筆 GET 皆正確。

3. **課程**  
   - 新增一門課程（含星期、堂數、學費、期數）→ 編輯 → 列表與單筆 GET 正確。

4. **報名與交易**  
   - 在「學生管理」或「課堂系統」將學生報名到課程 → 財務管理出現對應「未繳費」交易。

5. **會話與點名**  
   - 在「課程日曆」或「日曆總覽」確認有會話；在日曆點某日進入點名 Modal，更新出缺席 → Sessions API 更新、歷史課表可看到該會話。

6. **繳費**  
   - 在「財務管理」或「學生繳費」將一筆交易改為「已繳費」→ 列印收據/繳費單 → 再測「調整繳費日期」與合併列印（若有）。

7. **刪除與邊界**  
   - 刪除一筆交易或移除報名 → 刪除學生或課程（確認確認框與 404 行為）。

---

## 四、快速檢查指令（可選）

後端與前端皆啟動時，可在終端執行：

```powershell
# 後端健康檢查
Invoke-RestMethod -Uri "http://localhost:8000/health" -Method Get

# 學生列表
Invoke-RestMethod -Uri "http://localhost:8000/students/" -Method Get
```

或在瀏覽器開啟：

- 前端：http://localhost:3000  
- 後端 API 文件：http://localhost:8000/docs  
- 後端健康：http://localhost:8000/health  

---

## 五、測試結果記錄（範例）

可複製以下表格，在測試時打勾或填寫備註：

| 大項 | 子項 | 通過 ✓ / 失敗 ✗ | 備註 |
|------|------|------------------|------|
| 後端 — 健康檢查 | GET /health | | |
| 後端 — 學生 | CRUD 全流程 | | |
| 後端 — 課程 | CRUD 全流程 | | |
| 後端 — 會話 | CRUD + 查詢參數 | | |
| 後端 — 交易 | CRUD + 查詢參數 | | |
| 前端 — 導航 | 五個頁面切換 | | |
| 前端 — 學生管理 | 增刪改查、繳費、摘要、報名 | | |
| 前端 — 課堂系統 | 增刪改查、日曆、順延、繳費日期調整 | | |
| 前端 — 財務管理 | 狀態變更、收據/繳費單列印 | | |
| 前端 — 日曆總覽 | 月曆、單日點名 | | |
| 前端 — 歷史課表 | 列表與資料一致 | | |
| 流程 — 報名→交易→繳費 | 端到端 | | |

完成上述項目即可涵蓋目前系統的主要功能，並確認前後端連線與資料一致性。
